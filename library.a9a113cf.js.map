{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,0BAeAE,EAAAC,KAAKC,WAAWC,iBAAiB,SAXjC,WACE,MAAMC,GAAgB,EAAAL,EAAAM,MAAK,WAE3B,GAA6B,IAAzBD,EAAcE,OAAc,CAC9BN,EAAAC,KAAKM,aAAaC,UAAUC,IAAI,mBAChCT,EAAAC,KAAKS,YAAYC,UAAY,GAC7B,MAAMC,GAAgB,EAAAC,EAAAC,qBAAoBV,GAC1CJ,EAAAC,KAAKS,YAAYK,mBAAmB,YAAaH,E,gBCXrD,IAAAI,EAAAlB,EAAA,S,0BAgCA,SAASmB,IACPjB,EAAAC,KAAKiB,MAAMV,UAAUW,OAAO,aAC5BnB,EAAAC,KAAKmB,KAAKZ,UAAUW,OAAO,aAE3BnB,EAAAC,KAAKoB,UAAUV,UAAY,E,CAG7B,SAASW,EAASC,GACD,WAAXA,EAAEC,OACJP,IACAQ,OAAOC,oBAAoB,UAAWJ,G,YAI1CtB,EAAAC,KAAK0B,cAAcxB,iBAAiB,QAASc,GAC7CjB,EAAAC,KAAKS,YAAYP,iBAAiB,SA1ClCyB,eAA6BL,GAI3B,GAHAA,EAAEM,iBACFJ,OAAOtB,iBAAiB,UAAWmB,GACvBC,EAAEO,OAAOC,QAAQ,oBACjBR,EAAEO,OAAOtB,UAAUwB,SAAS,iBAAkB,CACxDhC,EAAAC,KAAKgC,cAAcC,YAAc,sBAEjC,MACMC,EADYZ,EAAEO,OACMM,QAAQC,GAClCrC,EAAAC,KAAKiB,MAAMV,UAAUW,OAAO,aAC5BnB,EAAAC,KAAKmB,KAAKZ,UAAUW,OAAO,aAC3BnB,EAAAC,KAAKgC,cAAcK,aAAa,UAAWH,GAC3CnC,EAAAC,KAAKsC,YAAYD,aAAa,UAAWH,GAEzC,IACE,MAAMK,QAAkBxB,EAAAyB,aAAiBN,GACnCO,GAAc,EAAA7B,EAAA8B,mBAAkBH,GACtCxC,EAAAC,KAAKoB,UAAUN,mBAAmB,YAAa2B,E,CAI/C,MAAOE,GACPC,QAAQC,IAAIF,EAAMG,Q","sources":["src/library-index.js","src/js/library.js","src/js/modal-library.js"],"sourcesContent":["import './js/theme';\nimport './js/library';\nimport './js/modal-footer';\nimport './js/modal-library';\n","import { load } from '../utils/storage';\nimport { refs } from './refs';\nimport { createMarkupLibrary } from './createMarkup';\n\nfunction onClickWatched() {\n  const moviesWatched = load('watched');\n\n  if (moviesWatched.length !== 0) {\n    refs.titleLibrary.classList.add('visually-hidden');\n    refs.listLibrary.innerHTML = '';\n    const markupLibrary = createMarkupLibrary(moviesWatched);\n    refs.listLibrary.insertAdjacentHTML('beforeend', markupLibrary);\n  }\n}\n\nrefs.btnWatched.addEventListener('click', onClickWatched);\n","import * as API from './api';\nimport { createMarkupModal } from './createMarkup';\nimport { refs } from './refs';\nimport { remove } from '../utils/storage';\n\nasync function onCardLibrary(e) {\n  e.preventDefault();\n  window.addEventListener('keydown', onEscKey);\n  const elt = e.target.closest('.library__list');\n  if (elt && !e.target.classList.contains('library__link')) {\n    refs.btnAddWatched.textContent = 'Remove from watched';\n\n    const currentEl = e.target;\n    const movieId = currentEl.dataset.id;\n    refs.modal.classList.toggle('is-hidden');\n    refs.body.classList.toggle('no-scroll');\n    refs.btnAddWatched.setAttribute('data-id', movieId);\n    refs.btnAddQueue.setAttribute('data-id', movieId);\n\n    try {\n      const movieInfo = await API.getMovieById(movieId);\n      const markupModal = createMarkupModal(movieInfo);\n      refs.modalList.insertAdjacentHTML('beforeend', markupModal);\n      // здесь кнопки становяться с действием REMOVE поэтому вожможно нужен класс modal__btn--remove (или дата атрибут)\n      //   addToWatchedBtn.addEventListener('click', addToWatched);\n      //   addToQueuedBtn.addEventListener('click', addToQueue);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n}\n\nfunction onCloseBtn() {\n  refs.modal.classList.toggle('is-hidden');\n  refs.body.classList.toggle('no-scroll');\n\n  refs.modalList.innerHTML = '';\n}\n\nfunction onEscKey(e) {\n  if (e.code === 'Escape') {\n    onCloseBtn();\n    window.removeEventListener('keydown', onEscKey);\n  }\n}\n\nrefs.closeModalBtn.addEventListener('click', onCloseBtn);\nrefs.listLibrary.addEventListener('click', onCardLibrary);\n"],"names":["parcelRequire","$hes0g","$krGWQ","refs","btnWatched","addEventListener","moviesWatched","load","length","titleLibrary","classList","add","listLibrary","innerHTML","markupLibrary","$g4lwF","createMarkupLibrary","insertAdjacentHTML","$7rYDH","$2631b5b1e00936b8$var$onCloseBtn","modal","toggle","body","modalList","$2631b5b1e00936b8$var$onEscKey","e","code","window","removeEventListener","closeModalBtn","async","preventDefault","target","closest","contains","btnAddWatched","textContent","movieId","dataset","id","setAttribute","btnAddQueue","movieInfo","getMovieById","markupModal","createMarkupModal","error","console","log","message"],"version":3,"file":"library.a9a113cf.js.map"}