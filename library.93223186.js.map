{"mappings":"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","sources":["src/js/materialize.js","src/js/auth.js"],"sourcesContent":["// DOM elements\nconst watchedMoviesList = document.querySelector('.watched_movies');\nconst queueMoviesList = document.querySelector('.queue_movies');\nconst loggedOutLinks = document.querySelectorAll('.logged-out');\nconst loggedInLinks = document.querySelectorAll('.logged-in');\n\nexport const setupUI = user => {\n  if (user) {\n    // toggle user UI elements\n    loggedInLinks.forEach(item => (item.style.display = 'block'));\n    loggedOutLinks.forEach(item => (item.style.display = 'none'));\n  } else {\n    //   toggle user elements\n    loggedInLinks.forEach(item => (item.style.display = 'none'));\n    loggedOutLinks.forEach(item => (item.style.display = 'block'));\n  }\n};\n\n// setup watchedMovies\nexport const setupWatchedMovies = data => {\n  if (data.length) {\n    let html = '';\n    data.forEach(doc => {\n      const watchedMovies = doc.data();\n      const li = `\n          <li>\n            <div class=\"collapsible-header grey lighten-4\"> ${watchedMovies.title} </div>\n            <div class=\"collapsible-body white\"> ${watchedMovies.content} </div>\n          </li>\n        `;\n      html += li;\n    });\n    watchedMoviesList.innerHTML = html;\n  } else {\n    watchedMoviesList.innerHTML =\n      '<h5 class=\"center-align\">Login to view your Library</h5>';\n  }\n};\n\n// setup queueMovies\nexport const setupQueueMovies = data => {\n  if (data.length) {\n    let html = '';\n    data.forEach(doc => {\n      const queueMovies = doc.data();\n      const li = `\n          <li>\n            <div class=\"collapsible-header grey lighten-4\"> ${queueMovies.title} </div>\n            <div class=\"collapsible-body white\"> ${queueMovies.content} </div>\n          </li>\n        `;\n      html += li;\n    });\n    queueMoviesList.innerHTML = html;\n  } else {\n    queueMoviesList.innerHTML =\n      '<h5 class=\"center-align\">Login to view your Library</h5>';\n  }\n};\n\n// setup materialize components\ndocument.addEventListener('DOMContentLoaded', function () {\n  const modals = document.querySelectorAll('.modal');\n  M.Modal.init(modals);\n\n  const items = document.querySelectorAll('.collapsible');\n  M.Collapsible.init(items);\n});\n","import { setupWatchedMovies, setupQueueMovies, setupUI } from './materialize';\n\n// listen for auth status changes\nauth.onAuthStateChanged(user => {\n  if (user) {\n    console.log('user logged in: ', user);\n    // get data\n    db.collection('watched_movies')\n      .get()\n      .then(snapshot => {\n        setupWatchedMovies(snapshot.docs);\n        setupUI(user);\n      });\n\n    db.collection('queue_movies')\n      .get()\n      .then(snapshot => {\n        setupQueueMovies(snapshot.docs);\n        setupUI(user);\n      });\n  } else {\n    console.log('user logged out');\n    setupUI(user);\n    setupWatchedMovies([]);\n    setupQueueMovies([]);\n  }\n});\n\n// create new guide (add to watched)\nconst createForm = document.querySelector('#create-form');\ncreateForm.addEventListener('submit', handleAddToWatched);\n\nfunction handleAddToWatched(e) {\n  e.preventDefault();\n  db.collection('watched_movies')\n    .add({\n      title: createForm.title.value,\n      content: createForm.content.value,\n    })\n    .then(() => {\n      // close the create modal & reset form\n      const modal = document.querySelector('#modal-create');\n      M.Modal.getInstance(modal).close();\n      createForm.reset();\n    })\n    .catch(err => {\n      console.log(err.message);\n    });\n}\n\n// create new guide (add to queue)\n// const createForm = document.querySelector('#create-form');\ncreateForm.addEventListener('submit', handleAddToQueue);\n\nfunction handleAddToQueue(e) {\n  e.preventDefault();\n  db.collection('queue_movies')\n    .add({\n      title: createForm.title.value,\n      content: createForm.content.value,\n    })\n    .then(() => {\n      // close the create modal & reset form\n      const modal = document.querySelector('#modal-create');\n      M.Modal.getInstance(modal).close();\n      createForm.reset();\n    })\n    .catch(err => {\n      console.log(err.message);\n    });\n}\n\n// signup\nconst signupForm = document.querySelector('#signup-form');\n// console.log(signupForm);\n\nsignupForm.addEventListener('submit', signUp);\n\nfunction signUp(e) {\n  e.preventDefault();\n\n  // get user info\n  const email = signupForm['signup-email'].value;\n  const password = signupForm['signup-password'].value;\n\n  console.log(email, password);\n\n  // sign up the user\n  auth.createUserWithEmailAndPassword(email, password).then(cred => {\n    // close the signup modal & reset form\n    const modal = document.querySelector('#modal-signup');\n    M.Modal.getInstance(modal).close();\n    signupForm.reset();\n  });\n}\n\n// logout\nconst logout = document.querySelector('#logout');\n\nlogout.addEventListener('click', handleLogout);\n\nfunction handleLogout(e) {\n  e.preventDefault();\n  auth.signOut().then(() => {\n    //     console.log('user signed out');\n  });\n}\n\n// login\nconst loginForm = document.querySelector('#login-form');\n\nloginForm.addEventListener('submit', handleLogin);\n\nfunction handleLogin(e) {\n  e.preventDefault();\n\n  // get user info\n  const email = loginForm['login-email'].value;\n  const password = loginForm['login-password'].value;\n\n  // log the user in\n  auth.signInWithEmailAndPassword(email, password).then(cred => {\n    console.log(cred.user);\n    // close the signup modal & reset form\n    const modal = document.querySelector('#modal-login');\n    M.Modal.getInstance(modal).close();\n    loginForm.reset();\n  });\n}\n"],"names":["$d9767bb699c5fe49$var$watchedMoviesList","document","querySelector","$d9767bb699c5fe49$var$queueMoviesList","$d9767bb699c5fe49$var$loggedOutLinks","querySelectorAll","$d9767bb699c5fe49$var$loggedInLinks","$d9767bb699c5fe49$export$86a308b97e5e5308","user","forEach","item","style","display","$d9767bb699c5fe49$export$2c98238cfc070e0e","data","length","html","doc","watchedMovies","li","concat","title","content","innerHTML","$d9767bb699c5fe49$export$7057126413bdb2d0","queueMovies","addEventListener","modals","M","Modal","init","items","Collapsible","auth","onAuthStateChanged","console","log","db","collection","get","then","snapshot","docs","$a8c8b369db0e2137$var$createForm","e","preventDefault","add","value","modal","getInstance","close","reset","catch","err","message","$a8c8b369db0e2137$var$signupForm","email","password","createUserWithEmailAndPassword","cred","signOut","$a8c8b369db0e2137$var$loginForm","signInWithEmailAndPassword"],"version":3,"file":"library.93223186.js.map"}